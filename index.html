<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PWC Mindmap Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css?v=202509301657">
    <link rel="stylesheet" href="themes.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="drag-region"></div>
            <div class="controls">
                <!-- Mode Toggle -->
                <div class="mode-toggle">
                    <button class="mode-btn active" id="editModeBtn" data-mode="edit" title="Modo Edición">
                        <i data-lucide="edit" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button class="mode-btn" id="presentModeBtn" data-mode="presentation" title="Modo Presentación">
                        <i data-lucide="presentation" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>

                <!-- Theme Selector -->
                <div class="theme-selector">
                    <button class="theme-btn active" id="themeLight" data-theme="light" title="Classic Light">
                        <i data-lucide="sun" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button class="theme-btn" id="themeBlueprint" data-theme="blueprint" title="Blueprint Professional">
                        <i data-lucide="drafting-compass" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button class="theme-btn" id="themeDark" data-theme="dark" title="Dark Mode">
                        <i data-lucide="moon" style="width: 16px; height: 16px;"></i>
                    </button>
                    <button class="theme-btn" id="themeMonochrome" data-theme="monochrome" title="Monochrome Elegant">
                        <i data-lucide="circle" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>

                <button class="btn" id="expandAllBtn" title="Expandir Todo">
                    <i data-lucide="unfold-vertical" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="collapseAllBtn" title="Colapsar Todo">
                    <i data-lucide="fold-vertical" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="centerViewBtn" title="Centrar">
                    <i data-lucide="crosshair" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="zoomOutBtn" title="Alejar">
                    <i data-lucide="zoom-out" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="zoomInBtn" title="Acercar">
                    <i data-lucide="zoom-in" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="resetViewBtn" title="Restablecer Vista">
                    <i data-lucide="scan-search" style="width: 16px; height: 16px;"></i>
                </button>
                <button class="btn" id="exportDataBtn" title="Exportar">
                    <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                </button>
            </div>
        </div>

        <button class="toggle-header-btn" id="toggleHeaderBtn" title="Mostrar/Ocultar Ribbon Superior">▲▲</button>

        <div class="main-content">
            <div class="projects-panel" id="projectsPanel">
                <h3>Proyectos</h3>
                <div class="project-list" id="projectList">
                    <!-- Projects will be added dynamically -->
                </div>
                <button class="btn add-project-btn" id="addProjectBtn">+ Nuevo Proyecto</button>
            </div>

            <div class="input-panel" id="inputPanel">
                <h3>Entrada de Esquema</h3>
                <div style="display: flex; gap: 10px; margin-bottom: 12px;">
                    <label class="file-upload-label" for="fileInput">
                        📄 Cargar archivo
                    </label>
                    <input type="file" id="fileInput" accept=".md,.txt,.pmap,.json" style="display: none;">
                </div>
                <textarea id="outlineInput" placeholder="Pega tu esquema o carga un archivo...">IA Responsable
1. Core Principles
* Fairness & Non-discrimination
   * Bias prevention | Techniques for detecting and mitigating biases in data and algorithms
   * Equitable outcomes | Ensuring fair impact across different demographic groups
   * Inclusive design | Considering diversity from the design phase
* Transparency
   * Explainable AI (XAI) | Methods for interpreting decisions of complex models
   * Model interpretability | Balance between accuracy and explainability
   * Decision documentation | Complete record of decision-making process
* Accountability
   * Clear ownership | Defining who is responsible for each component
   * Audit trails | Maintaining detailed records of all operations
   * Responsibility assignment | RACI matrix for AI projects
* Privacy & Security
   * Data protection | Implementing privacy-by-design principles
   * Consent management | Robust systems for obtaining and managing consent
   * Cybersecurity measures | Protection against adversarial attacks
* Human-Centered Design
   * Human oversight | Keeping humans in the loop for critical decisions
   * User empowerment | Giving control and agency to end users
   * Augmentation not replacement | Focus on complementing human capabilities
2. AI Risks & Challenges
* Technical Risks
   * Algorithmic bias | Biases in training data and algorithm design
   * Model drift | Performance degradation over time
   * Adversarial attacks | Vulnerabilities to malicious manipulation
   * Black box problem | Lack of interpretability in complex models
* Social Risks
   * Job displacement | Automation and job loss
   * Digital divide | Unequal access to AI technologies
   * Misinformation spread | Use of AI to create and spread false information
   * Surveillance concerns | Use of AI for mass monitoring
* Ethical Risks
   * Autonomous weapons | Development of lethal autonomous weapons systems
   * Manipulation & persuasion | Using AI to manipulate human behavior
   * Consent violations | Processing data without proper consent
   * Human dignity threats | Systems that dehumanize or objectify people
* Legal & Compliance Risks
   * Liability uncertainties | Unclear responsibility for AI-caused harm
   * Intellectual property issues | Copyright and patent concerns in AI training
   * Regulatory non-compliance | Failing to meet emerging AI regulations
3. Regulatory Landscape
* Global Regulations
   * EU AI Act | Comprehensive regulation for AI systems in Europe
   * GDPR implications | Data protection requirements for AI systems
   * China AI regulations | Algorithmic recommendation and deepfake regulations
   * US federal initiatives | NIST framework and federal AI strategies
* Industry Standards
   * ISO/IEC 23053 & 23894 | International standards for AI governance
   * IEEE standards | Ethical design and algorithmic bias standards
   * Sector-specific guidelines | Healthcare, finance, and transportation AI rules
* National Frameworks
   * Canada's Directive on Automated Decision-Making | Requirements for government AI use
   * UK's AI governance framework | Principles-based approach to AI regulation
   * Singapore's Model AI Governance Framework | Voluntary adoption framework
4. Frameworks & Methodologies
* Ethics Frameworks
   * IEEE Ethically Aligned Design | Comprehensive framework for ethical AI development
   * Asilomar AI Principles | Research community principles for beneficial AI
   * Montreal Declaration | Human-centered approach to AI development
* Governance Frameworks
   * NIST AI Risk Management Framework | Systematic approach to AI risk management
   * OECD AI Principles | International principles for trustworthy AI
   * UNESCO AI Ethics Recommendations | Global framework for AI ethics
* Assessment Tools
   * Impact assessments | Evaluating AI system effects on stakeholders
   * Risk matrices | Systematic risk identification and evaluation
   * Ethical review boards | Independent oversight of AI projects
   * Audit protocols | Standardized procedures for AI system audits
5. Opportunities & Benefits
* Economic Growth
   * Innovation acceleration | Faster research and development cycles
   * Productivity gains | Automation of routine and complex tasks
   * New market creation | Entirely new industries and business models
   * Cost optimization | Reduced operational costs across industries
* Social Good
   * Healthcare advancement | Improved diagnosis, treatment, and drug discovery
   * Education accessibility | Personalized learning and broader access to education
   * Environmental monitoring | Better tracking and response to environmental changes
   * Disaster response | Enhanced prediction and response to natural disasters
* Business Advantages
   * Competitive differentiation | Unique value propositions through AI capabilities
   * Trust building | Enhanced reputation through responsible AI practices
   * Risk mitigation | Better identification and management of business risks
   * Sustainable practices | Optimization of resource use and environmental impact
6. Implementation Strategies
* Organizational Level
   * AI ethics committees | Cross-functional teams for ethical oversight
   * Training programs | Education on responsible AI practices
   * Policy development | Internal guidelines and procedures
   * Culture transformation | Building ethics into organizational culture
* Technical Implementation
   * Privacy-preserving techniques | Differential privacy and secure computation
   * Federated learning | Distributed learning without data sharing
   * Differential privacy | Mathematical guarantees for individual privacy
   * Homomorphic encryption | Computation on encrypted data
* Design Approaches
   * Value-sensitive design | Incorporating stakeholder values in design
   * Participatory design | Including affected communities in development
   * Inclusive development | Ensuring diverse perspectives and needs
   * Continuous monitoring | Ongoing assessment of system performance and impact
7. Key Stakeholders
* Internal
   * Leadership & executives | Strategic decision-making and resource allocation
   * Data scientists & developers | Technical implementation and model development
   * Ethics officers | Oversight and guidance on ethical considerations
   * Legal & compliance teams | Regulatory compliance and risk management
* External
   * Regulators | Government agencies overseeing AI development and deployment
   * End users | Individuals and organizations affected by AI systems
   * Civil society | NGOs and advocacy groups representing public interests
   * Academic institutions | Research and education on AI ethics and governance
   * Industry consortiums | Collaborative efforts for standards and best practices
8. Tools & Resources
* Technical Tools
   * Bias detection software | Automated tools for identifying algorithmic bias
   * Explainability toolkits | Libraries and frameworks for model interpretability
   * Privacy-enhancing technologies | Tools for protecting individual privacy
   * Model cards & datasheets | Documentation standards for AI models and datasets
* Governance Tools
   * Ethics checklists | Step-by-step guides for ethical AI development
   * Risk assessment templates | Standardized formats for evaluating AI risks
   * Audit frameworks | Systematic approaches for AI system audits
   * Documentation standards | Best practices for AI system documentation
* Monitoring & Evaluation
   * Performance metrics | Quantitative measures of AI system effectiveness
   * Fairness indicators | Metrics for assessing algorithmic fairness
   * Impact measurements | Tools for evaluating societal and individual impact
   * Continuous improvement processes | Frameworks for ongoing system enhancement</textarea>
                <button class="generate-btn" id="generateBtn">GENERAR MAPA MENTAL</button>
            </div>

            <button class="toggle-panel-btn" id="togglePanelBtn" title="Mostrar/Ocultar Paneles">◀◀</button>

            <div class="mindmap-container" id="mindmapContainer">
                <div class="mindmap-wrapper" id="mindmapWrapper">
                    <canvas id="connectionCanvas" class="connection-canvas"></canvas>
                    <div class="mindmap-nodes" id="nodesContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" id="contextEdit">
            ✏️ Editar Nodo
        </div>
        <div class="context-menu-item" id="contextToggleInfo">
            ℹ️ Ver/Ocultar Info
        </div>
        <div class="context-menu-item" id="contextToggleChildren">
            🔄 Expandir/Colapsar
        </div>
        <div class="context-menu-item" id="contextAddChild">
            ➕ Agregar Hijo
        </div>
        <div class="context-menu-item" id="contextDelete">
            🗑️ Eliminar Nodo
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="edit-modal" id="editModal">
        <div class="modal-header">
            <h3 id="modalTitle">Editar Nodo</h3>
            <button class="close-modal" id="closeModalBtn">✕</button>
        </div>
        <div class="modal-content">
            <label>📝 Título del Nodo</label>
            <input type="text" id="modalNodeTitle" class="node-title-input" placeholder="Título del nodo...">

            <label>ℹ️ Descripción (se muestra al presionar Info)</label>
            <textarea id="modalDescription" placeholder="Descripción breve del nodo (máximo 50 palabras)..." maxlength="500" rows="3"></textarea>

            <label>📋 Notas Adicionales (opcional)</label>
            <textarea id="modalNotes" placeholder="Notas detalladas adicionales..." rows="4"></textarea>

            <div class="upload-section">
                <label>🖼️ Imágenes</label>
                <label class="upload-label" for="imageUpload">
                    📷 Cargar Imagen
                </label>
                <input type="file" id="imageUpload" accept="image/*" multiple>

                <div class="uploaded-images" id="modalImages"></div>
            </div>

            <button class="save-btn" id="saveNodeBtn">💾 Guardar Cambios</button>
        </div>
    </div>

    <!-- Shortcuts modal -->
    <div class="shortcuts-modal" id="shortcutsModal">
        <div class="modal-header">
            <h3>Atajos de Teclado</h3>
            <button class="close-modal" id="closeShortcutsBtn">✕</button>
        </div>
        <div class="shortcuts-content">
            <div class="shortcut-group">
                <h4>Navegación</h4>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + scroll</span>
                    <span class="shortcut-desc">Zoom in/out</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + 0</span>
                    <span class="shortcut-desc">Restablecer zoom</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">Espacio + arrastrar</span>
                    <span class="shortcut-desc">Mover vista</span>
                </div>
            </div>

            <div class="shortcut-group">
                <h4>Nodos</h4>
                <div class="shortcut-item">
                    <span class="shortcut-keys">Tab</span>
                    <span class="shortcut-desc">Agregar nodo hijo</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">Enter</span>
                    <span class="shortcut-desc">Agregar nodo hermano</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + Enter</span>
                    <span class="shortcut-desc">Editar nodo seleccionado</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">Delete</span>
                    <span class="shortcut-desc">Eliminar nodo</span>
                </div>
            </div>

            <div class="shortcut-group">
                <h4>Vista</h4>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + Shift + E</span>
                    <span class="shortcut-desc">Expandir todo</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + Shift + C</span>
                    <span class="shortcut-desc">Colapsar todo</span>
                </div>
                <div class="shortcut-item">
                    <span class="shortcut-keys">⌘ + \</span>
                    <span class="shortcut-desc">Mostrar/ocultar barra lateral</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Lightbox Modal -->
    <div class="lightbox-overlay" id="lightboxOverlay">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightboxClose">✕</button>
            <img class="lightbox-image" id="lightboxImage" src="" alt="Full size image">
        </div>
    </div>

    <!-- Categories Panel -->
    <div class="categories-panel hidden" id="categoriesPanel">
        <div class="categories-header">
            <h3>Categorías</h3>
            <div class="categories-header-buttons">
                <button class="panel-collapse-btn" id="collapseCategoriesPanel" title="Colapsar panel">◀</button>
                <button class="panel-close-btn" id="closeCategoriesPanel">✕</button>
            </div>
        </div>

        <div class="categories-list" id="categoriesList">
            <!-- Categories will be rendered dynamically -->
        </div>

        <button class="add-category-btn" id="addCategoryBtn">
            ➕ Nueva Categoría
        </button>

        <div class="categories-stats">
            <div class="stat-item">
                <span class="stat-label">Total nodos:</span>
                <span class="stat-value" id="totalNodesCount">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Categorizados:</span>
                <span class="stat-value" id="categorizedNodesCount">0</span>
            </div>
        </div>
    </div>

    <!-- Toggle Categories Button -->
    <button class="toggle-categories-btn" id="toggleCategoriesBtn" title="Mostrar/Ocultar Categorías">
        🏷️
    </button>

    <!-- Category Edit Modal -->
    <div class="modal-overlay" id="categoryModalOverlay"></div>
    <div class="edit-modal category-edit-modal" id="categoryEditModal">
        <div class="modal-header">
            <h3 id="categoryModalTitle">Nueva Categoría</h3>
            <button class="close-modal" id="closeCategoryModalBtn">✕</button>
        </div>
        <div class="modal-content">
            <label>📝 Nombre</label>
            <input type="text" id="categoryNameInput" class="node-title-input" placeholder="Nombre de la categoría..." maxlength="30">

            <label>🎨 Color</label>
            <div class="color-picker">
                <button class="color-option" data-color="#ef4444" style="background: #ef4444;" title="Rojo"></button>
                <button class="color-option" data-color="#f59e0b" style="background: #f59e0b;" title="Naranja"></button>
                <button class="color-option" data-color="#eab308" style="background: #eab308;" title="Amarillo"></button>
                <button class="color-option" data-color="#10b981" style="background: #10b981;" title="Verde"></button>
                <button class="color-option" data-color="#3b82f6" style="background: #3b82f6;" title="Azul"></button>
                <button class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;" title="Púrpura"></button>
                <button class="color-option" data-color="#ec4899" style="background: #ec4899;" title="Rosa"></button>
                <button class="color-option" data-color="#6b7280" style="background: #6b7280;" title="Gris"></button>
            </div>

            <label>📍 Icono (opcional)</label>
            <input type="text" id="categoryIconInput" class="node-title-input" placeholder="Emoji o texto corto..." maxlength="2">

            <button class="save-btn" id="saveCategoryBtn">💾 Guardar</button>
        </div>
    </div>

    <script src="renderer.js"></script>
    <script src="mindmap-engine.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>